!function(){"use strict";document.addEventListener("DOMContentLoaded",(()=>{})),async function(){await function(){const e=d3.select("#my_dataviz").append("svg").attr("id","chart").attr("viewBox","0 0 960 450").attr("preserveAspectRatio","xMidYMid meet");d3.json("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&sparkline=false").then((function(t){t.map((e=>{e.price_change_percentage_24h>0?e.change="up":e.change="down"})),console.log(t);let a=t.filter((e=>e.price_change_percentage_24h<0)),n=t.filter((e=>e.price_change_percentage_24h>0));function r(e){let t={price_change_percentage_24h:0};for(let a=0;a<e.length;a++)t.price_change_percentage_24h>e[a].price_change_percentage_24h&&(t=e[a]);return t}function c(e){let t={price_change_percentage_24h:0};for(let a=0;a<e.length;a++)t.price_change_percentage_24h<e[a].price_change_percentage_24h&&(t=e[a]);return t}function o(){return Math.abs(r(a).price_change_percentage_24h)>c(n).price_change_percentage_24h?Math.abs(r(a).price_change_percentage_24h):c(n).price_change_percentage_24h}console.log(`${a.length} downs `),console.log(`${n.length} ups `),console.log(r(a)),console.log(c(n));const i=d3.scaleOrdinal().domain(["down","up"]).range(["#fc0303","#03fc2c"]),l=d3.scaleLinear().domain([0,o()]).range([7,50]),p=d3.scaleLinear().domain([0,o()]).range([1,45]),g=d3.scaleLinear().domain([0,o()]).range([3,15]),s=d3.scaleOrdinal().domain(["up","down"]).range([0,1e3]),h=d3.select("#my_dataviz").append("div").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),d=e.append("g").selectAll("circle").data(t).join("circle").attr("class","node").attr("r",(e=>l(Math.abs(e.price_change_percentage_24h)))).attr("cx",480).attr("cy",225).style("fill",(function(e){return"url(#"+e.name.toLowerCase().replaceAll(" ","-")+")"})).style("fill-opacity",1).attr("stroke",(e=>i(e.change))).style("stroke-width",2.5).on("mouseover",(function(e,t){h.style("opacity",1)})).on("mousemove",(function(e,t){h.html("<u>"+t.name+"</u><br>"+t.price_change_percentage_24h.toFixed(1)+"%").style("left",e.x/2+20+"px").style("top",e.y/2-30+"px")})).on("mouseleave",(function(e,t){h.style("opacity",0)})).call(d3.drag().on("start",(function(e,t){e.active||f.alphaTarget(.01).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(e,t){e.active||f.alphaTarget(.01),t.fx=null,t.fy=null}))),_=e.selectAll(null).data(t).enter().append("text").text((e=>e.price_change_percentage_24h<0?`${e.price_change_percentage_24h.toFixed(1)}%`:e.price_change_percentage_24h>0?`+${e.price_change_percentage_24h.toFixed(1)}%`:"0%")).attr("font-size",(e=>g(Math.abs(e.price_change_percentage_24h)))).attr("text-anchor","middle");e.selectAll("coinImage").data(t).enter().append("pattern").attr("class","coinImage").attr("id",(function(e){return e.name.toLowerCase().replaceAll(" ","-")})).attr("height","100%").attr("width","100%").attr("patternContentUnits","objectBoundingBox").append("image").attr("height",1).attr("width",1).attr("preserveAspectRatio","none").attr("xlink:href",(e=>e.image));const f=d3.forceSimulation().force("x",d3.forceX().strength(.3).x(225)).force("y",d3.forceY().strength(2).y((e=>s(e.change)))).force("center",d3.forceCenter().x(480).y(225)).force("charge",d3.forceManyBody().strength(1e-11)).force("collide",d3.forceCollide().strength(.7).radius((function(e){return l(Math.abs(e.price_change_percentage_24h))+5})).iterations(5));f.nodes(t).on("tick",(()=>{d.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),_.attr("x",(e=>e.x)).attr("y",(e=>e.y+p(Math.abs(e.price_change_percentage_24h))))}))}))}()}()}();
//# sourceMappingURL=main.js.map