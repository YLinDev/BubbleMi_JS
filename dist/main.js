!function(){"use strict";document.addEventListener("DOMContentLoaded",(()=>{})),async function(){await function(){const e=d3.select("#my_dataviz").append("svg").attr("id","chart").attr("viewBox","0 0 960 500").attr("preserveAspectRatio","xMidYMid meet");d3.json("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false").then((function(t){t.map((e=>{e.price_change_percentage_24h>0?e.change="up":e.change="down"}));let n=t.filter((e=>e.price_change_percentage_24h<0)),c=t.filter((e=>e.price_change_percentage_24h>0));function a(e){let t={price_change_percentage_24h:0};for(let n=0;n<e.length;n++)t.price_change_percentage_24h>e[n].price_change_percentage_24h&&(t=e[n]);return t}function r(e){let t={price_change_percentage_24h:0};for(let n=0;n<e.length;n++)t.price_change_percentage_24h<e[n].price_change_percentage_24h&&(t=e[n]);return t}console.log(`${n.length} downs `),console.log(`${c.length} ups `),console.log(a(n)),console.log(r(c));const o=d3.scaleOrdinal().domain(["down","up"]).range(["red","green"]),i=d3.scaleLinear().domain([0,Math.abs(a(n).price_change_percentage_24h)>r(c).price_change_percentage_24h?Math.abs(a(n).price_change_percentage_24h):r(c).price_change_percentage_24h]).range([7,55]),l=d3.scaleOrdinal().domain(["up","down"]).range([10,100]),s=d3.select("#my_dataviz").append("div").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");var p=e.append("g").selectAll("circle").data(t).join("circle").attr("class","node").attr("r",(e=>i(Math.abs(e.price_change_percentage_24h)))).attr("cx",480).attr("cy",250).html("yes").style("fill",(e=>o(e.change))).style("fill-opacity",.8).attr("stroke","black").style("stroke-width",2).on("mouseover",(function(e,t){s.style("opacity",1)})).on("mousemove",(function(e,t){s.html("<u>"+t.name+"</u><br>"+t.price_change_percentage_24h.toFixed(2)+"%").style("left",e.x/2+20+"px").style("top",e.y/2-30+"px")})).on("mouseleave",(function(e,t){s.style("opacity",0)})).call(d3.drag().on("start",(function(e,t){e.active||g.alphaTarget(.03).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(e,t){e.active||g.alphaTarget(.03),t.fx=null,t.fy=null})));const g=d3.forceSimulation().force("x",d3.forceX().strength(.1).x(250)).force("y",d3.forceY().strength(1).y((e=>l(e.change)))).force("center",d3.forceCenter().x(480).y(250)).force("charge",d3.forceManyBody().strength(.1)).force("collide",d3.forceCollide().strength(.2).radius((function(e){return i(Math.abs(e.price_change_percentage_24h))+7})).iterations(1));g.nodes(t).on("tick",(function(e){p.attr("cx",(e=>e.x)).attr("cy",(e=>e.y))}))}))}()}()}();
//# sourceMappingURL=main.js.map